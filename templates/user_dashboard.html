{% extends "layout.html" %}
{% block content %}

<h3 class="mb-4">Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ / Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ù†</h3>

<!-- Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ -->
<a href="{{ url_for('home') }}" class="btn btn-user mb-3">ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a>

<!-- ÙØ±Ù… Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¬Ø¯ÛŒØ¯ -->
<div class="card p-4 mb-4">
    <h5>Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¬Ø¯ÛŒØ¯</h5>
    <form method="POST" action="{{ url_for('user_new_request') }}">
        <div class="mb-3">
            <label>Ø§Ù†ØªØ®Ø§Ø¨ Ø®Ø¯Ù…Øª</label>
            <select name="service_id" class="form-control" required>
                {% for service in services %}
                    <option value="{{ service.id }}">{{ service.title }} - {{ "{:,}".format(service.price) }} ØªÙˆÙ…Ø§Ù†</option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3">
            <label>ØªÙˆØ¶ÛŒØ­Ø§Øª</label>
            <textarea name="description" class="form-control" rows="3" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§Ø¶Ø§ÙÛŒ..." required></textarea>
        </div>
        <button class="btn btn-success w-100">Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª</button>
    </form>
</div>

<!-- Ù„ÛŒØ³Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡ -->
<div class="card p-3">
    <h5 class="mb-3">Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡</h5>
    <table class="table table-bordered table-striped text-center">
        <thead>
            <tr>
                <th>Ø®Ø¯Ù…Øª</th>
                <th>ØªÙˆØ¶ÛŒØ­Ø§Øª</th>
                <th>ÙˆØ¶Ø¹ÛŒØª</th>
                <th>ØªØ§Ø±ÛŒØ® Ø«Ø¨Øª</th>
            </tr>
        </thead>
        <tbody>
            {% for r in requests %}
            <tr>
                <td>{{ r.service.title }}</td>
                <td>{{ r.description }}</td>
                <td>
                    {% if r.status == 'Pending' %}
                        <span class="badge bg-warning text-dark">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</span>
                    {% elif r.status == 'Approved' %}
                        <span class="badge bg-success">ØªØ§ÛŒÛŒØ¯ Ø´Ø¯</span>
                    {% elif r.status == 'Rejected' %}
                        <span class="badge bg-danger">Ø±Ø¯ Ø´Ø¯</span>
                    {% endif %}
                </td>
                <td>{{ r.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}